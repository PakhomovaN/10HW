!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);const o=new class{constructor(t){this.baseUrl=t}getRequest(t,e,n){const o=new XMLHttpRequest;o.open("GET",`${this.baseUrl}${t}`),o.addEventListener("load",t=>{t.currentTarget.status>=200&&t.currentTarget.status<300?e(t):(n(t),console.log(t))}),o.addEventListener("error",n),o.send()}postRequest(t,e,n,o,a){const s=new XMLHttpRequest;s.open("POST",`${this.baseUrl}${t}`);for(const t of a)s.serRequestHeader(t.name,t.value);s.addEventListener("load",t=>{t.currentTarget.status>=200&&t.currentTarget.status<300?e(t):(n(t),console.log(t))}),s.addEventListener("error",n),s.send(o)}deleteRequest(t,e,n){const o=new XMLHttpRequest;o.open("DELETE",`${this.baseUrl}${t}`),o.addEventListener("load",t=>{t.currentTarget.status>=200&&t.currentTarget.status<300?e(t):(n(t),console.log(t))}),o.addEventListener("error",n),o.send()}}("https://more-posts-9.herokuapp.com"),a=document.getElementById("root"),s=document.createElement("form");s.className="form-inline mb-2",s.innerHTML='\n    <div class="form-group">\n        <input class="form-control" data-id="content">\n    </div>\n    <select class="custom-select" data-id="type">\n        <option value="regular">Обычный</option>\n        <option value="image">Изображение</option>\n        <option value="audio">Аудио</option>\n        <option value="video">Видео</option>\n    </select>  \n    <button class="btn btn-primary">Ok</button>\n',a.appendChild(s);const r=s.querySelector("[data-id=content]");r.value=localStorage.getItem("content"),r.addEventListener("input",t=>{localStorage.setItem("content",t.currentTarget.value)});const i=s.querySelector("[data-id=type]");i.value=localStorage.getItem("type"),i.addEventListener("input",t=>{localStorage.setItem("type",t.content.value)});s.addEventListener("submit",t=>{t.preventDefault();const e=postInputEl,n=document.createElement("li");n.textContent=e,n.classList.add("sending"),n.appendChild(n),fetch(`${baseUrl}/posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:e})}).then(t=>{if(!t.ok)throw new Error(t.statusText);postsEl.removeChild(n)}).catch(t=>{}),postInputEl.value="";const a={content:r.value,type:i.value};o.postRequest("/posts",t=>{u(),r.value="",localStorage.removeItem("link")},d,JSON.stringify(a),[{name:"Content-Type",value:"application/json"}])}),setInterval(()=>{fetch(`${baseUrl}/posts/${lastSeendId}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{console.log(t),0!==t.length&&(lastSeendId=t[t.length-1].id,function(t){for(const e of t){const t=document.createElement("li");t.textContent=e.content,postsEl.appendChild(t)}}(t))}).catch(t=>{console.log(t)})},500);const l=document.createElement("div");a.appendChild(l);const c=t=>{const e=JSON.parse(t.currentTarget.responseText);l.innerHTML="",e.sort((t,e)=>t.likes-e.likes);for(const t of e){const e=document.createElement("div");e.className="card mb-2","regular"===t.type?e.innerHTML=`\n                <div class="card-body">\n                    <div class="card-text">${t.content}</div>\n                    <button class="btn">♡ ${t.likes}</button>\n                    <button class="btn btn-primary" data-action="like">like</button>\n                    <button class="btn btn-danger" data-action="dislike">dislike</button>\n                    <button class="btn btn-danger" data-action="remove>x</button> \n                </div>\n            `:"image"===t.type?e.innerHTML=`\n                    <img src="${t.content}" class="card-img-top">\n                    <div class="card-body">\n                        <button class="btn">♡ ${t.likes}</button>\n                        <button class="btn btn-primary" data-action="like">like</button>\n                        <button class="btn btn-danger" data-action="dislike">dislike</button>\n                        <button class="btn btn-danger" data-action="remove>x</button>\n                    </div>\n                `:"audio"===t.type?e.innerHTML=`\n                    <audio src="${t.content}" class="card-audio-top">\n                    <div class="card-body">\n                        <button class="btn">♡ ${t.likes}</button>\n                        <button class="btn btn-primary" data-action="like">like</button>\n                        <button class="btn btn-danger" data-action="dislike">dislike</button>\n                        <button class="btn btn-danger" data-action="remove>x</button>\n                    </div>\n                `:"video"===t.type?e.innerHTML=`\n                    <video src="${t.content}" class="card-video-top">\n                    <div class="card-body">\n                        <button class="btn">♡ ${t.likes}</button>\n                        <button class="btn btn-primary" data-action="like">like</button>\n                        <button class="btn btn-danger" data-action="dislike">dislike</button>\n                        <button class="btn btn-danger" data-action="remove>x</button>\n                        </div>\n                `:(e.innerHTML=`\n                    <div class="card-body">\n                        <div class="card-text">${t.content}</div>\n                        <button class="btn">♡ ${t.likes}</button>\n                        <button class="btn btn-primary" data-action="like">like</button>\n                        <button class="btn btn-danger" data-action="dislike">dislike</button>\n                        <button class="btn btn-danger" data-action="remove">x</button>\n                    </div>\n                `,e.querySelector("[data-action=like]").addEventListener("click",()=>{o.postRequest(`/posts/${t.id}/likes`,u,d)}),e.querySelector("[data-action=dislike]").addEventListener("click",()=>{o.deleteRequest(`/posts/${t.id}/likes`,u,d)}),e.querySelector("[data-action=remove]").addEventListener("click",()=>{o.deleteRequest(`/posts/${t.id}`,u,d)}),l.appendChild(e))}},d=t=>{console.log(t)},u=()=>{o.getRequest("/posts",c,d)};u()}]);